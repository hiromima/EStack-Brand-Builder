{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://brand-builder.ai/schemas/OverallEvaluation.json",
  "title": "OverallEvaluation",
  "description": "総合評価スキーマ - Brand Builder Evaluation System",
  "type": "object",
  "required": ["overallScore", "categoryScores", "finalDecision", "timestamp"],
  "properties": {
    "overallScore": {
      "type": "number",
      "minimum": 0,
      "maximum": 100,
      "description": "総合スコア (0-100)"
    },
    "categoryScores": {
      "type": "object",
      "required": [
        "brandConsistency",
        "creativeInnovation",
        "marketAlignment",
        "feasibility"
      ],
      "properties": {
        "brandConsistency": {
          "type": "object",
          "required": ["score", "weight"],
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "ブランド一貫性スコア"
            },
            "weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "重み (0-1)"
            },
            "details": {
              "$ref": "BrandConsistency.schema.json"
            }
          }
        },
        "creativeInnovation": {
          "type": "object",
          "required": ["score", "weight"],
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "クリエイティブ革新性スコア"
            },
            "weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "重み (0-1)"
            },
            "details": {
              "$ref": "CreativeInnovation.schema.json"
            }
          }
        },
        "marketAlignment": {
          "type": "object",
          "required": ["score", "weight"],
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "市場適合性スコア"
            },
            "weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "重み (0-1)"
            },
            "details": {
              "$ref": "MarketAlignment.schema.json"
            }
          }
        },
        "feasibility": {
          "type": "object",
          "required": ["score", "weight"],
          "properties": {
            "score": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "実行可能性スコア"
            },
            "weight": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "description": "重み (0-1)"
            },
            "details": {
              "$ref": "Feasibility.schema.json"
            }
          }
        }
      },
      "description": "カテゴリ別スコア"
    },
    "finalDecision": {
      "type": "object",
      "required": ["status", "reasoning"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["approved", "conditionally-approved", "needs-improvement", "rejected"],
          "description": "最終判定"
        },
        "reasoning": {
          "type": "string",
          "description": "判定理由"
        },
        "autoApproved": {
          "type": "boolean",
          "description": "自動承認フラグ (score >= 90)"
        }
      }
    },
    "improvements": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["category", "priority", "suggestion"],
        "properties": {
          "category": {
            "type": "string",
            "enum": ["brandConsistency", "creativeInnovation", "marketAlignment", "feasibility"],
            "description": "改善カテゴリ"
          },
          "priority": {
            "type": "string",
            "enum": ["high", "medium", "low"],
            "description": "優先度"
          },
          "suggestion": {
            "type": "string",
            "description": "改善提案"
          }
        }
      },
      "description": "改善項目リスト"
    },
    "evaluationMetrics": {
      "type": "object",
      "properties": {
        "evaluationDuration": {
          "type": "number",
          "description": "評価所要時間 (秒)"
        },
        "modelVersions": {
          "type": "object",
          "properties": {
            "claude": {
              "type": "string"
            },
            "gpt": {
              "type": "string"
            },
            "gemini": {
              "type": "string"
            }
          },
          "description": "使用モデルバージョン"
        },
        "consensusLevel": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "モデル間合意度 (0-1)"
        }
      }
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "評価日時 (ISO 8601)"
    },
    "evaluationId": {
      "type": "string",
      "description": "評価 ID"
    },
    "brandProposalId": {
      "type": "string",
      "description": "ブランド提案 ID"
    },
    "version": {
      "type": "string",
      "description": "スキーマバージョン",
      "default": "1.0.0"
    }
  },
  "additionalProperties": false
}
